<template>
  <div class="sorter">
    <div v-if="genre && !isShowSearch">
      Film by {{ genre }} genre
    </div>
    <div
      v-else
      class="filter-by-wrapper"
    >
      <div
        v-if="films.length > 0"
        class="found-films"
      >
        {{ films.length }} movie found
      </div>
      <filter-by
        label="SORT BY"
        :button-primary="{ name: 'RELEASE DATE', method: sortByDate }"
        :button-secondary="{ name: 'RATING', method: sortByRating }"
        :is-right="true"
      />
    </div>
  </div>
</template>

<script lang="ts">
import { defineComponent, PropType } from 'vue';
import { CardType } from '@/types';

export default defineComponent({
  props: {
    films: { type: Array as PropType<Array<CardType>>, required: true },
    genre: { type: String, required: true },
    isShowSearch: { type: Boolean, required: true },
  },
  emits: ['sortByDate', 'sortByRating'],
  data: () => ({ isActiveDate: true, isActiveRating: false }),
  methods: {
    sortByDate() {
      const newCards = [...this.films];
      newCards.sort((a, b) => b.year - a.year);
      this.$emit('sortByDate', newCards);
    },
    sortByRating() {
      const newCards = [...this.films];
      newCards.sort((a, b) => b.rating - a.rating);
      this.$emit('sortByRating', newCards);
    },
  },
});
</script>

<style scoped>
  .sorter{
    color: #ffffff;
    padding: 16px 56px;
    background-color: #555555;
  }
  .filter-by-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .found-films{
    font-weight: bold;
  }
</style>
